<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teste de Login</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
    <h1>Teste de Login - Debug</h1>
    
    <h2>1. Teste de Candidato</h2>
    <button onclick="testCandidateLogin()">Testar Login Jo√£o (joao@email.com / 123456)</button>
    <div id="candidate-result"></div>
    
    <h2>2. Teste de Empresa</h2>
    <button onclick="testCompanyLogin()">Testar Login Empresa (contato@techcorp.com / 123456)</button>
    <div id="company-result"></div>
    
    <h2>3. Log de Debug</h2>
    <div id="debug-log" style="background: #f0f0f0; padding: 10px; margin: 10px 0; height: 200px; overflow-y: auto;"></div>

    <script>
        function log(message) {
            const debugLog = document.getElementById('debug-log');
            debugLog.innerHTML += new Date().toLocaleTimeString() + ': ' + message + '<br>';
            debugLog.scrollTop = debugLog.scrollHeight;
            console.log(message);
        }

        function testCandidateLogin() {
            log('üîç Iniciando teste de login de candidato...');
            document.getElementById('candidate-result').innerHTML = 'Testando...';
            
            fetch('http://localhost:8080/candidatos')
                .then(response => {
                    log('‚úÖ Response Status: ' + response.status);
                    return response.json();
                })
                .then(candidatos => {
                    log('‚úÖ Candidatos carregados: ' + candidatos.length);
                    
                    const candidato = candidatos.find(cand => 
                        cand.email === 'joao@email.com' && cand.senha === '123456'
                    );
                    
                    if (candidato) {
                        log('‚úÖ Login SUCESSO! Candidato encontrado: ' + candidato.nome);
                        document.getElementById('candidate-result').innerHTML = 
                            '‚úÖ SUCESSO: ' + candidato.nome + ' (ID: ' + candidato.id + ')';
                    } else {
                        log('‚ùå Login FALHOU! Credenciais n√£o encontradas');
                        document.getElementById('candidate-result').innerHTML = '‚ùå FALHOU';
                        
                        // Vamos listar os emails dispon√≠veis
                        log('üìã Emails dispon√≠veis:');
                        candidatos.forEach(c => {
                            log('  - ' + c.email + ' / ' + c.senha);
                        });
                    }
                })
                .catch(error => {
                    log('‚ùå ERRO na requisi√ß√£o: ' + error);
                    document.getElementById('candidate-result').innerHTML = '‚ùå ERRO: ' + error;
                });
        }

        function testCompanyLogin() {
            log('üîç Iniciando teste de login de empresa...');
            document.getElementById('company-result').innerHTML = 'Testando...';
            
            fetch('http://localhost:8080/empresas')
                .then(response => {
                    log('‚úÖ Response Status: ' + response.status);
                    return response.json();
                })
                .then(empresas => {
                    log('‚úÖ Empresas carregadas: ' + empresas.length);
                    
                    const empresa = empresas.find(emp => 
                        emp.email === 'contato@techcorp.com' && emp.senha === '123456'
                    );
                    
                    if (empresa) {
                        log('‚úÖ Login SUCESSO! Empresa encontrada: ' + empresa.nome);
                        document.getElementById('company-result').innerHTML = 
                            '‚úÖ SUCESSO: ' + empresa.nome + ' (ID: ' + empresa.id + ')';
                    } else {
                        log('‚ùå Login FALHOU! Credenciais n√£o encontradas');
                        document.getElementById('company-result').innerHTML = '‚ùå FALHOU';
                        
                        // Vamos listar os emails dispon√≠veis
                        log('üìã Emails dispon√≠veis:');
                        empresas.forEach(e => {
                            log('  - ' + e.email + ' / ' + e.senha);
                        });
                    }
                })
                .catch(error => {
                    log('‚ùå ERRO na requisi√ß√£o: ' + error);
                    document.getElementById('company-result').innerHTML = '‚ùå ERRO: ' + error;
                });
        }

        // Auto-teste na inicializa√ß√£o
        window.addEventListener('load', function() {
            log('üöÄ P√°gina carregada. Pronto para testes!');
        });
    </script>
</body>
</html> 